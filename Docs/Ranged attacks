cases i need to cover:

melee attack with a weapon
ranged attack with a ranged weapon in the ranged weapon slot and an ammo projectile of the appropriate type
ranged attack with a thrown weapon, the weapon is the projectile, it is in the ranged slot
ranged attack with a wand that goes in a line , stopping at the first target or the first wall it hits
ranged attack with a wand that goes in a line, passing through and affecting all targets or stopping at the first wall it hits
ranged attack with a wand that goes in a line, passing through and affecting all targets or stopping at the first wall it hits Creates an explosion at the impact point 
that is parameterized by the item(?) at the very least for damage, effects applied, radius, particle

For all of these a source and direction are all you need for targeting

Make attack parameters have:

{
	...
	Image projectileImage;
	int NumberOfTargetsCanPassThrough;

	explosionPArameters{
	    attackParameters{
	    ...
	    }
	}
}

all attacks with and without items are just an 'attack' action.  Attacks take a source, direction, optional item
they derive a range from the item, otherwise they read it off the body. Items and bodies default range is 1
flags on the item determine if the attack should consume ammo, use ammo projectile, and add ammo effects / explosion to an attack



Should be able to spawn animated projectile which moves and hits targets as it goes
Should be able to share code for spawning standard item projectile as this will be most things
Should be able to spawn a line for lightning or something (takes up multiple tiles in a line, does not move)
Should be able to spawn particles on cast, and on hit.
Should be able to spin projectiles, but not all projectiles spin

----------------------
OnHitPrefab (positioned on thing hit, deletes itself after onhitPrefabLife seconds)
OnCastPrefab (applied to caster, deletes itself after onCastPrefabLife seconds)
ProjectilePrefab (rotation set based on facing direction, moved by attack action)
Deal with the line later - it will be another prefab, that does not move, that goes from the offset * 1 to offset * range instantaneously, either by stretching or, more likely, replicating into all those tiles, each created instance will remove itself.   OncastPrefab and OnHitPrefab will still work like before, the prefabs will NOT move with the projectile, though the mecahnics are the same, just likely with a very short per tile travel time for it to look right)

