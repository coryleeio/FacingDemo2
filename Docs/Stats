
combine action params / explosion params / cost / actiontype into a thing, relevant skills ?? use that for all interactions.

campaign -> 
              rules engine
                    contains rules for if you can do an action type on an item ??? (not sure)
                    contains rules for things like block% derived from hardcoded attributes
                    and data driven skills.
                    contains rules for Tohit as a function which looks at hard coded interaction type and data driven skills to determine to hit % 
                    contains xp needed to level
                    contains xp needed for skill maximum

                    stuff like that.





















Leveling
Yes - I like it as a means of progression.  Even if I remove it you are still just accumulating items
and you still need to pick arbitrary points at which to give abilities etc, this just makes the math easier, and gives a false sense of improvement(good thing) Lets not make you choose anything on levelup for now in order to minimize ui work.

when you level you are awarded the per level attributes for your class and body to spend on your stats, 
and abilities based on your class template.  These are stored in state.  So you might want or not want to be polymorphed due to the stats awarded on levelup depending on your goals.


concerns:
farming to overlevel

options to mitigate: hunger mechanic, no respawns / something that will catch you and kill the crap out of you. / spawn monsters at level of player, but not loot so it gets harder if you dally. / diminishing returns on xp of monstesr below your level and spawn monsters based on dungeon level. OOD monsters.

Questions: 
Respawns exist?
Respawns give exp?
Respawns at level of player or dungeon?


Race:
race template, determines what body visual you start with some starting racial stats
On certain levels may award abilities from the template.
On certain levels may award bonus to stats.
On certain levels may award some persistant effects (that should never be removed???)




Classes starting skills, stats, items:

Decision: lets keep the classes because if every run is the same the game lacks replayability.  Think of FTL the different ships change the parameters of play making some things better and some worse.


class template
attribute map to show what stats are STARTED with
item tables to determine what items are STARTED with
skills are STARTED with,
no bearing past START.  All SKILLS past then


Abilities:
body template based on level / 
has normal combat params, explosion params etc, applied effects, self applied effects
arbitrarily code executable by adding effects to it, so no impl is necessary.
needs a cost object, need to apply cost to actions on other items too. 
and needs action type so we know what formula to use to calculate all the to hit and all that.
probably what animation to play as well.


XP:
Your character needs N xp to level up.
When he gains N xp it is also split amongst your most recently used skills

Skills: 
Mods can add new skills, but not new attributes
skills grant attributes at certain ranks and can level from some minimum to some maximum rank. Each requiring subsequently more xp. They are used in the hit, damage, calculations etc.



????? Obviously these calculations may differ across.. skill or attacks????



Attributes:
attributes are things like str,int,dex,vision range, max health,
they lack a state unlike current health.


Stats:
stats are things like current health that are stateful, they are just on the entity, and more cannot be added by mods. 


Derived Stats: 
Some stats are calculated from skills, the foruma for this needs to be hardcoded, which is problematic since it requires the same code to know about atleast some of the skills.

This would mean that modders cant add skills because you would need to know the name of the skill in the code.



Decisions:
Do monsters have classes          
	: More consistent, but More typing to add monsters harder to see raw monster stats without rendering them
	YES the consistency is valuable for the code, and otherwise templates will be inconsistent and polymorphing and playing as monsters and stuff like that will be annoying.  Just make it the same for the player as the NPC. Most will likely be melee with no items and effects on their attacks anyway since items drop otherwise.


Can modders add classes           This is pretty easy, so do it.
Can you have special abilities without a class?    YES from your body






KIT
Moddable collection of templates and possibly loot tables that determine what game starts are available, will need to be able to determine if theyre unlocked.


SKILLS

Decision can modders add skills: ?




ATTRIBUTES

Decision: Can modders add attributes:
No - this is fairly hard, and can be done later.



Attributes are calculated like so:


Body template base value for attribute + Body template per level value + class template attribute per level + highest attribute booster in all items - largest negative attribute booster in all items + highest attribute booster in all effects - + lowest attribute booster in all effects OR body template cap for attribute if the sum is higher than the cap. (Becoming a fire elemental might make you extremely vulnerable to cold, no matter what items you equip.)


char attributes:

STR                gear prereq / STR dmg scaling
FIN                DEX dmg scaling / dodge
INT                INT dmg scaling / spell prereq
CON                HP scaling / shield prereq
MEMORY             Number abilities
PERCEPTION         Crit rate for all


ACCURACY: 
			
accuracy% = ATTACK_BASE_ACC + (.01 * SKILL_ACC_BONUS% * ATTACK_BASE_ACC)
eg 90 + (.01 * 15 * 90) = 103.5
hit chance = accuracy% * ( 1 - DODGE% * .01 )
eg with 30 % DODGE chance
hit chance = 103.5 * (1 - (30 * .01)) = 72.45


DAMAGE:
DYE_NUM x DYE_SIZE + (ATTR * ATTR_MOD)


CRITICALS:


DURATION:
EFFECT_BASE_DUR + (ATTR * ATTR_MOD)


accuracy can go over 100, and will lower dodge.

If the attack lands - EFfects use resistance to determine if they 'miss' aka resisted.
An attack can hit but have the effect get resisted
All attacks hit 100% of time, but effects can be resisted Effects land
based on how much resist you have.

DAMAGE_MITIGATION: All damage is reduced by resistances -100-200%
(this can result in absorption)


